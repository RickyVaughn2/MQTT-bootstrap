angular.module("Mqtt.Controls",["Mqtt.Services"]),angular.module("Mqtt.Controls").directive("mqttBar",function(){return{restrict:"E",scope:{},controller:["$scope","mqtt",function(t,e){t.connect=function(t,a,n,r,o,i,c){e.connect(t,a,n,r,o),e.subscribe(i,c,t,a,n,r,o)},t.chart=void 0,t.uniqueId="myChart"+t.$id}],link:function(t,e,a){var n=a.maxValue;t.connect(a.host,parseInt(a.port),a.user,a.pass,"true"==a.useSsl,a.topic,function(e){var a=parseInt(e.payloadString),r=document.getElementById(t.uniqueId).getContext("2d");void 0==n&&(n=1.2*a),void 0==t.chart?t.chart=new Chart(r).Bar({labels:[e.destinationName],datasets:[{fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:[a]}]},{animationSteps:50}):(t.chart.datasets[0].bars[0].value=a,t.chart.update()),t.$apply()})},replace:!0,template:"<canvas id='{{::uniqueId}}' width='400' height='400'></canvas>"}}),angular.module("Mqtt.Controls").directive("mqttDoughnut",function(){return{restrict:"E",scope:{},controller:["$scope","mqtt",function(t,e){t.connect=function(t,a,n,r,o,i,c){e.connect(t,a,n,r,o),e.subscribe(i,c,t,a,n,r,o)},t.chart=void 0,t.uniqueId="myChart"+t.$id}],link:function(t,e,a){var n=a.maxValue;t.connect(a.host,parseInt(a.port),a.user,a.pass,"true"==a.useSsl,a.topic,function(e){var a=parseInt(e.payloadString),r=document.getElementById(t.uniqueId).getContext("2d");void 0==n&&(n=1.2*parseInt(a)),void 0==t.chart?t.chart=new Chart(r).Doughnut([{value:a,color:a>80?"#F7464A":"#46BFBD",highlight:a>80?"#FF5A5E":"#5AD3D1",label:e.destinationName},{value:n-a,color:"#FFFFFF",highlight:"#FFFFFF",label:"empty"}],{animationSteps:50}):(t.chart.segments[0].value=a,t.chart.segments[1].value=n-a,t.chart.update()),t.$apply()})},replace:!0,template:"<canvas id='{{::uniqueId}}' width='400' height='400'></canvas>"}});